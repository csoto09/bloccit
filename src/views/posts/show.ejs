<!DOCTYPE html>
<html>

<head>
  <% include ../static/partials/head.ejs %>
</head>

<body>
  <% include ../static/partials/navbar.ejs %>

  <main class="container">
    <h1><%= post.title %>
      <% if(post.flairs) { %>
      <% post.flairs.forEach((flair) => {%>
      <a href="/topics/<%= post.topicId %>/posts/<%= post.id %>/flairs/<%= flair.id %>/edit">
        <span class="btn rounded text-white" style="background: <%= flair.color %>">
          <%= flair.title %>
        </span>
      </a>
      <% }) %>
      <% } %>
    </h1>
    <a href="/topics/<%= post.topicId %>/posts/<%= post.id %>/edit" class="btn btn-warning">Edit</a>
    <a href="/topics/<%= post.topicId %>/posts/<%= post.id %>/flairs/new" class="btn btn-success">New Flair</a>
    <form style="display:initial" action="/topics/<%= post.topicId %>/posts/<%= post.id %>/destroy" method="post">
      <button type="submit" class="btn btn-danger">Delete</button>
    </form>
    <p><%= post.body %></p>
    <section id="comment-form">
      <% if(currentUser) { %>
      <% include ../comments/new.ejs %>
      <% } %>
    </section>
    <section id="comment-list">
      <% if(post.comments) { %>
      <% post.comments.forEach((comment) => { %>
      <%- include("../comments/show.ejs", {comment}) %>
      <% }) %>
      <% } %>
    </section>
  </main>

  <% include ../static/partials/baseScripts.ejs %>

</body>

</html>